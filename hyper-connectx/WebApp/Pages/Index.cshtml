@page
@model WebApp.Pages.IndexModel
@{
    ViewData["Title"] = "Home";
}

<div class="hero">
    <h1>Welcome to HyperConnectX</h1>
    <p>A customizable Connect Four-style game</p>
    <a asp-page="/NewGame" class="btn btn-primary btn-lg">Start New Game</a>
</div>

<section class="saved-games">
    <h2>Saved Games</h2>
    
    @if (Model.SavedGames.Any())
    {
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Game Name</th>
                    <th>Players</th>
                    <th>Board Size</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var game in Model.SavedGames)
                {
                    <tr>
                        <td>@game.SaveName</td>
                        <td>
                            @(string.IsNullOrEmpty(game.P1Name) ? "Player 1" : game.P1Name) vs 
                            @(string.IsNullOrEmpty(game.P2Name) ? "Player 2" : game.P2Name)
                        </td>
                        <td>
                            @(game.Configuration?.BoardWidth)x@(game.Configuration?.BoardHeight)
                        </td>
                        <td>
                            @switch (game.Status)
                            {
                                case BLL.EGameStatus.InProgress:
                                    @(game.NextMoveByX ? $"{game.P1Name}'s Turn" : $"{game.P2Name}'s Turn")
                                    break;
                                case BLL.EGameStatus.XWon:
                                    @($"{game.P1Name} won")
                                    break;
                                case BLL.EGameStatus.OWon:
                                    @($"{game.P2Name} won")
                                    break;
                                case BLL.EGameStatus.Draw:
                                    @("Draw")
                                    break;
                            }
                        </td>
                        <td>
                            <a asp-page="/Game" asp-route-id="@game.Id" class="btn btn-success btn-sm">Load</a>
                            <form method="post" asp-page-handler="Delete" asp-route-id="@game.Id" style="display:inline;">
                                <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Delete this game?');">Delete</button>
                            </form>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    }
    else
    {
        <div class="alert alert-info">
            <p>No saved games found. Start a new game to begin playing!</p>
        </div>
    }
</section>
